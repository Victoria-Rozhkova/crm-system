(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["planning"],{"13d5":function(e,t,r){"use strict";var n=r("23e7"),o=r("d58f").left,c=r("a640"),i=r("2d00"),l=r("605d"),a=!l&&i>79&&i<83,s=a||!c("reduce");n({target:"Array",proto:!0,forced:s},{reduce:function(e){var t=arguments.length;return o(this,e,t,t>1?arguments[1]:void 0)}})},"605d":function(e,t,r){"use strict";var n=r("da84"),o=r("c6b6");e.exports="process"===o(n.process)},6859:function(e,t,r){"use strict";r.r(t);var n=r("7a23");const o={class:"page-title"},c={key:1,class:"center"},i={key:2},l={class:"progress"};function a(e,t,r,a,s,d){const p=Object(n["resolveComponent"])("Loading"),u=Object(n["resolveComponent"])("router-link"),b=Object(n["resolveDirective"])("tooltip");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("h3",null,Object(n["toDisplayString"])(e.$t("planning.title")),1),Object(n["createElementVNode"])("h4",null,Object(n["toDisplayString"])(d.getCurrency(e.user.bill)),1)]),s.loading?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0})):s.categories.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("section",i,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.categories,t=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t.id},[Object(n["createElementVNode"])("p",null,[Object(n["createElementVNode"])("strong",null,Object(n["toDisplayString"])(t.title)+":",1),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(d.getCurrency(t.spend))+" "+Object(n["toDisplayString"])(e.$t("planning.out"))+" "+Object(n["toDisplayString"])(d.getCurrency(t.limit)),1)]),Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["determinate",[t.progressColor]]),style:Object(n["normalizeStyle"])({width:t.progress+"%"})},null,6)])),[[b,t.tooltipText]])]))),128))])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.$t("common.noCategories")),1),Object(n["createVNode"])(u,{to:"/categories"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("common.addCategory")),1)]),_:1})]))])}r("13d5");var s=r("5502"),d=r("3f9b"),p={name:"Planning",data(){return{loading:!0,categories:[],records:[]}},computed:{...Object(s["c"])(["user"])},async mounted(){const e=await this.$store.dispatch("getRecords"),t=await this.$store.dispatch("getCategories");this.categories=t.map(t=>{const r=e.filter(e=>e.categoryId===t.id).filter(e=>"outcome"===e.type).reduce((e,t)=>e+ +t.amount,0),n=100*r/t.limit,o=n>100?100:n,c=n<60?"green":n<100?"yellow":"red",i=t.limit-r,l=`${i<0?this.$t("planning.tooltipText.excess"):this.$t("planning.tooltipText.left")} ${Object(d["a"])(Math.abs(i))}`;return{...t,progress:o,spend:r,progressColor:c,tooltipText:l}}),this.loading=!1},methods:{getCurrency(e){return Object(d["a"])(e)}}},u=r("6b0d"),b=r.n(u);const g=b()(p,[["render",a]]);t["default"]=g},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},d58f:function(e,t,r){"use strict";var n=r("59ed"),o=r("7b0b"),c=r("44ad"),i=r("07fa"),l=TypeError,a="Reduce of empty array with no initial value",s=function(e){return function(t,r,s,d){var p=o(t),u=c(p),b=i(p);if(n(r),0===b&&s<2)throw new l(a);var g=e?b-1:0,j=e?-1:1;if(s<2)while(1){if(g in u){d=u[g],g+=j;break}if(g+=j,e?g<0:b<=g)throw new l(a)}for(;e?g>=0:b>g;g+=j)g in u&&(d=r(d,u[g],g,p));return d}};e.exports={left:s(!1),right:s(!0)}}}]);
//# sourceMappingURL=planning.101cf00c.js.map