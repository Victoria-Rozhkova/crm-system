{"version":3,"sources":["webpack:///./src/views/Profile.vue?44a7","webpack:///./src/views/Profile.vue","webpack:///./src/views/Profile.vue?d912"],"names":["class","for","_createElementVNode","type","_createElementBlock","_hoisted_1","_toDisplayString","_ctx","$t","onSubmit","_cache","_withModifiers","args","$options","_hoisted_2","id","$data","name","$event","_normalizeClass","invalid","$setup","v$","$error","_hoisted_3","_hoisted_4","$errors","$message","_hoisted_5","isRuLocale","_hoisted_6","_hoisted_7","_hoisted_8","data","setup","useVuelidate","computed","mapGetters","mounted","this","user","locale","setTimeout","window","M","updateTextFields","validations","required","helpers","withMessage","minLength","$params","min","methods","mapActions","$validate","body","$i18n","updateUser","messages","profileUpdate","__exports__","render"],"mappings":"2GAAA,W,uJCESA,MAAM,c,GAKJA,MAAM,e,GAOFC,IAAI,e,SACJD,MAAM,uB,GAIVA,MAAM,U,QAIPE,gCAA2B,QAArBF,MAAM,SAAO,U,GAIfA,MAAM,+BAA+BG,KAAK,U,QAEhDD,gCAAwC,KAArCF,MAAM,wBAAuB,QAAI,I,wDA5B1CI,gCA+BM,YA9BJF,gCAEM,MAFNG,EAEM,CADJH,gCAAkC,UAAAI,6BAA3BC,EAAAC,GAAG,kBAAD,KAGXN,gCAyBO,QAzBDF,MAAM,OAAQS,SAAMC,EAAA,KAAAA,EAAA,GAAAC,2BAAA,IAAAC,IAAUC,EAAAJ,UAAAI,EAAAJ,YAAAG,GAAQ,e,CAC1CV,gCAWM,MAXNY,EAWM,C,4BAVJZ,gCAKE,SAJAa,GAAG,cACHZ,KAAK,O,qCACSa,EAAAC,KAAIC,GACjBlB,MAAKmB,4BAAA,CAAAC,QAAaC,EAAAC,GAAGL,KAAKM,U,0BADbP,EAAAC,U,SAAd,MAGFf,gCAA0D,QAA1DsB,EAA0DlB,6BAA9BC,EAAAC,GAAG,kBAAD,GACWa,EAAAC,GAAGL,KAAKM,Q,yBAAjDnB,gCAEU,QAFVqB,EAEUnB,6BADRe,EAAAC,GAAGL,KAAKS,QAAQ,GAAGC,UAAQ,I,yCAG/BzB,gCAOM,MAPN0B,EAOM,CANJ1B,gCAKQ,c,6BALD,a,4BAELA,gCAA8C,SAAvCC,KAAK,W,qCAAoBa,EAAAa,WAAUX,I,gCAAVF,EAAAa,cAChCC,E,6BAA2B,iBAI/B5B,gCAGS,SAHT6B,EAGS,C,0DAFJxB,EAAAC,GAAG,oBAAqB,IAC3B,GAAAwB,K,0DAYO,GACbf,KAAM,UACNgB,OACE,MAAO,CACLhB,KAAM,GACNY,YAAY,IAGhBK,QACE,MAAO,CAAEZ,GAAIa,mBAEfC,SAAU,IACLC,eAAW,CAAC,UAEjBC,UACEC,KAAKtB,KAAOsB,KAAKC,KAAKvB,KACtBsB,KAAKV,WAAkC,UAArBU,KAAKC,KAAKC,OAC5BC,WAAW,KACTC,OAAOC,EAAEC,oBACR,IAELC,cACE,MAAO,CACL7B,KAAM,CACJ8B,SAAUC,OAAQC,YAAY,cAAeF,QAC7CG,UAAWF,OAAQC,YACjB,EAAGE,aAAe,4BAA2BA,EAAQC,eACrDF,eAAU,OAKlBG,QAAS,IACJC,eAAW,CAAC,eACf,iBAEE,GADAf,KAAKjB,GAAGiC,aACHhB,KAAKjB,GAAGC,OAAQ,CACnB,MAAMiC,EAAO,CACXvC,KAAMsB,KAAKtB,KACXwB,OAAQF,KAAKV,WAAa,QAAU,SAEtCU,KAAKkB,MAAMhB,OAASF,KAAKV,WAAa,QAAU,QAChD,UACQU,KAAKmB,WAAWF,GACtBjB,KAAKZ,SAASgC,OAASC,eACvB,Y,iCC/EV,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB","file":"js/profile.439c4767.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Profile.vue?vue&type=style&index=0&id=28c21d9d&scoped=true&lang=css\"","<template>\r\n  <div>\r\n    <div class=\"page-title\">\r\n      <h3>{{ $t(\"profile.title\") }}</h3>\r\n    </div>\r\n\r\n    <form class=\"form\" @submit.prevent=\"onSubmit\">\r\n      <div class=\"input-field\">\r\n        <input\r\n          id=\"description\"\r\n          type=\"text\"\r\n          v-model.trim=\"name\"\r\n          :class=\"{ invalid: v$.name.$error }\"\r\n        />\r\n        <label for=\"description\">{{ $t(\"profile.label\") }}</label>\r\n        <small class=\"helper-text invalid\" v-if=\"v$.name.$error\">{{\r\n          v$.name.$errors[0].$message\r\n        }}</small>\r\n      </div>\r\n      <div class=\"switch\">\r\n        <label>\r\n          English\r\n          <input type=\"checkbox\" v-model=\"isRuLocale\" />\r\n          <span class=\"lever\"></span>\r\n          Русский\r\n        </label>\r\n      </div>\r\n      <button class=\"btn waves-effect waves-light\" type=\"submit\">\r\n        {{ $t(\"profile.btnText\") }}\r\n        <i class=\"material-icons right\">send</i>\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport { useVuelidate } from \"@vuelidate/core\";\r\nimport { required, minLength, helpers } from \"@vuelidate/validators\";\r\nimport messages from \"@/utils/messages\";\r\n\r\nexport default {\r\n  name: \"Profile\",\r\n  data() {\r\n    return {\r\n      name: \"\",\r\n      isRuLocale: true,\r\n    };\r\n  },\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"user\"]),\r\n  },\r\n  mounted() {\r\n    this.name = this.user.name;\r\n    this.isRuLocale = this.user.locale === \"ru-RU\";\r\n    setTimeout(() => {\r\n      window.M.updateTextFields();\r\n    }, 0);\r\n  },\r\n  validations() {\r\n    return {\r\n      name: {\r\n        required: helpers.withMessage(\"Введите имя\", required),\r\n        minLength: helpers.withMessage(\r\n          ({ $params }) => `Имя должно быть не менее ${$params.min} символов`,\r\n          minLength(2)\r\n        ),\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions([\"updateUser\"]),\r\n    async onSubmit() {\r\n      this.v$.$validate();\r\n      if (!this.v$.$error) {\r\n        const body = {\r\n          name: this.name,\r\n          locale: this.isRuLocale ? \"ru-RU\" : \"en-US\",\r\n        };\r\n        this.$i18n.locale = this.isRuLocale ? \"ru-RU\" : \"en-US\";\r\n        try {\r\n          await this.updateUser(body);\r\n          this.$message(messages.profileUpdate);\r\n        } catch {}\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.switch {\r\n  margin-bottom: 2rem;\r\n}\r\n</style>\r\n","import { render } from \"./Profile.vue?vue&type=template&id=28c21d9d&scoped=true\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=28c21d9d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\GitRepositories\\\\crm-system\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-28c21d9d\"]])\n\nexport default __exports__"],"sourceRoot":""}