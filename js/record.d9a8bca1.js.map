{"version":3,"sources":["webpack:///./src/views/Record.vue","webpack:///./src/views/Record.vue?9553","webpack:///./src/views/NotFound.vue","webpack:///./src/views/NotFound.vue?c399","webpack:///./src/assets/images/404.gif"],"names":["class","for","type","_createElementVNode","_createElementBlock","_hoisted_1","_toDisplayString","_ctx","$t","$data","loading","_createBlock","_component_Loader","key","categories","length","onSubmit","_cache","_withModifiers","args","$options","_hoisted_3","ref","category","$event","_Fragment","_renderList","id","value","title","_hoisted_4","name","_hoisted_5","step","amount","_normalizeClass","invalid","$setup","v$","$error","_hoisted_6","_hoisted_7","$errors","$message","_hoisted_8","description","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_2","_createVNode","_component_router_link","to","data","select","setup","useVuelidate","validations","required","helpers","withMessage","minValue","$params","min","this","$store","dispatch","setTimeout","window","M","FormSelect","init","$refs","updateTextFields","computed","mapGetters","isCanAddRecord","user","bill","methods","$validate","body","categoryId","date","Date","toJSON","newBill","messages","$reset","beforeUnmount","destroy","__exports__","render","src","_imports_0","$props","text","props","module","exports"],"mappings":"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","file":"js/record.d9a8bca1.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"page-title\">\r\n      <h3>{{ $t(\"newRecord.title\") }}</h3>\r\n    </div>\r\n    <Loader v-if=\"loading\" />\r\n    <div v-else-if=\"!categories.length\" class=\"center\">\r\n      <p>{{ $t(\"common.noCategories\") }}</p>\r\n      <router-link to=\"/categories\">{{ $t(\"common.addCategory\") }}</router-link>\r\n    </div>\r\n    <form v-else class=\"form\" @submit.prevent=\"onSubmit\">\r\n      <div class=\"input-field\">\r\n        <select ref=\"select\" v-model=\"category\">\r\n          <option\r\n            v-for=\"category of categories\"\r\n            :key=\"category.id\"\r\n            :value=\"category.id\"\r\n          >\r\n            {{ category.title }}\r\n          </option>\r\n        </select>\r\n        <label>{{ $t(\"newRecord.categoryLabel\") }}</label>\r\n      </div>\r\n\r\n      <p>\r\n        <label>\r\n          <input\r\n            class=\"with-gap\"\r\n            name=\"type\"\r\n            type=\"radio\"\r\n            value=\"income\"\r\n            v-model=\"type\"\r\n          />\r\n          <span>{{ $t(\"common.income\") }}</span>\r\n        </label>\r\n      </p>\r\n\r\n      <p>\r\n        <label>\r\n          <input\r\n            class=\"with-gap\"\r\n            name=\"type\"\r\n            type=\"radio\"\r\n            value=\"outcome\"\r\n            v-model=\"type\"\r\n          />\r\n          <span>{{ $t(\"common.outcome\") }}</span>\r\n        </label>\r\n      </p>\r\n\r\n      <div class=\"input-field\">\r\n        <input\r\n          id=\"amount\"\r\n          type=\"number\"\r\n          step=\"any\"\r\n          v-model.number=\"amount\"\r\n          :class=\"{ invalid: v$.amount.$error }\"\r\n        />\r\n        <label for=\"amount\">{{ $t(\"newRecord.amount\") }}</label>\r\n        <small class=\"helper-text invalid\" v-if=\"v$.amount.$error\">{{\r\n          v$.amount.$errors[0].$message\r\n        }}</small>\r\n      </div>\r\n\r\n      <div class=\"input-field\">\r\n        <input\r\n          id=\"description\"\r\n          type=\"text\"\r\n          v-model=\"description\"\r\n          :class=\"{ invalid: v$.description.$error }\"\r\n        />\r\n        <label for=\"description\">{{ $t(\"newRecord.description\") }}</label>\r\n        <small class=\"helper-text invalid\" v-if=\"v$.description.$error\">{{\r\n          v$.description.$errors[0].$message\r\n        }}</small>\r\n      </div>\r\n\r\n      <button class=\"btn waves-effect waves-light\" type=\"submit\">\r\n        {{ $t(\"newRecord.btnText\") }}\r\n        <i class=\"material-icons right\">send</i>\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useVuelidate } from \"@vuelidate/core\";\r\nimport { required, minValue, helpers } from \"@vuelidate/validators\";\r\nimport { mapGetters } from \"vuex\";\r\nimport messages from \"@/utils/messages\";\r\n\r\nexport default {\r\n  name: \"Record\",\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      categories: [],\r\n      category: null,\r\n      select: null,\r\n      type: \"outcome\",\r\n      amount: 50,\r\n      description: \"\",\r\n    };\r\n  },\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  validations: {\r\n    amount: {\r\n      required: helpers.withMessage(\"Введите сумму\", required),\r\n      minValue: helpers.withMessage(\r\n        ({ $params }) => `Сумма должна быть не менее ${$params.min}`,\r\n        minValue(50)\r\n      ),\r\n    },\r\n    description: {\r\n      required: helpers.withMessage(\"Введите описание\", required),\r\n    },\r\n  },\r\n  async mounted() {\r\n    this.categories = await this.$store.dispatch(\"getCategories\");\r\n    this.loading = false;\r\n    if (this.categories.length) {\r\n      this.category = this.categories[0].id;\r\n    }\r\n    setTimeout(() => {\r\n      this.select = window.M.FormSelect.init(this.$refs.select);\r\n      window.M.updateTextFields();\r\n    }, 0);\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"user\"]),\r\n    isCanAddRecord() {\r\n      if (this.type === \"income\") {\r\n        return true;\r\n      }\r\n      return this.user.bill >= this.amount;\r\n    },\r\n  },\r\n  methods: {\r\n    async onSubmit() {\r\n      this.v$.$validate();\r\n      if (!this.v$.$error) {\r\n        const body = {\r\n          categoryId: this.category,\r\n          type: this.type,\r\n          amount: this.amount,\r\n          description: this.description,\r\n          date: new Date().toJSON(),\r\n        };\r\n        if (this.isCanAddRecord) {\r\n          try {\r\n            await this.$store.dispatch(\"addRecord\", body);\r\n            const newBill =\r\n              this.type === \"income\"\r\n                ? this.user.bill + this.amount\r\n                : this.user.bill - this.amount;\r\n            await this.$store.dispatch(\"updateUser\", {\r\n              bill: newBill,\r\n            });\r\n            this.$message(messages[\"add-record\"]);\r\n            this.v$.$reset();\r\n            this.amount = 50;\r\n            this.description = \"\";\r\n          } catch {}\r\n        } else {\r\n          this.$error(\r\n            `Недостаточно средств на счете (${this.amount - this.user.bill})`\r\n          );\r\n        }\r\n      }\r\n    },\r\n  },\r\n  beforeUnmount() {\r\n    if (this.select && this.select.destroy) {\r\n      this.select.destroy();\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./Record.vue?vue&type=template&id=871b3438\"\nimport script from \"./Record.vue?vue&type=script&lang=js\"\nexport * from \"./Record.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\GitRepositories\\\\crm-system\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"center\">\r\n    <p>\r\n      <strong>{{ text || $t(\"common.404\") }}</strong>\r\n    </p>\r\n    <img src=\"../assets/images/404.gif\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"NotFound\",\r\n  props: [\"text\"],\r\n};\r\n</script>\r\n","import { render } from \"./NotFound.vue?vue&type=template&id=bc03f0f6\"\nimport script from \"./NotFound.vue?vue&type=script&lang=js\"\nexport * from \"./NotFound.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\GitRepositories\\\\crm-system\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"img/404.4a06efb5.gif\";"],"sourceRoot":""}