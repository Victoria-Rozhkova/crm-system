{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./node_modules/core-js/internals/engine-is-node.js","webpack:///./src/views/Planning.vue","webpack:///./src/views/Planning.vue?2545","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/internals/array-reduce.js"],"names":["$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","CHROME_BUG","FORCED","target","proto","forced","reduce","callbackfn","length","arguments","this","undefined","global","classof","module","exports","process","class","_createElementBlock","_createElementVNode","_hoisted_1","_toDisplayString","_ctx","$t","$options","getCurrency","user","bill","$data","loading","_createBlock","_component_Loading","key","categories","_hoisted_3","_Fragment","_renderList","category","id","title","spend","limit","_hoisted_4","_normalizeClass","progressColor","style","_normalizeStyle","width","progress","tooltipText","_hoisted_2","_createVNode","_component_router_link","to","name","data","records","computed","mapGetters","$store","dispatch","map","filter","record","categoryId","type","total","amount","percent","tooltipValue","getCurrencyFormat","Math","abs","methods","__exports__","render","fails","METHOD_NAME","argument","method","call","aCallable","toObject","IndexedObject","lengthOfArrayLike","$TypeError","TypeError","REDUCE_EMPTY","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","i","right"],"mappings":"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","file":"js/planning.101cf00c.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\nvar FORCED = CHROME_BUG || !arrayMethodIsStrict('reduce');\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar global = require('../internals/global');\nvar classof = require('../internals/classof-raw');\n\nmodule.exports = classof(global.process) === 'process';\n","<template>\r\n  <div>\r\n    <div class=\"page-title\">\r\n      <h3>{{ $t(\"planning.title\") }}</h3>\r\n      <h4>{{ getCurrency(user.bill) }}</h4>\r\n    </div>\r\n    <Loading v-if=\"loading\" />\r\n    <div v-else-if=\"!categories.length\" class=\"center\">\r\n      <p>{{ $t(\"common.noCategories\") }}</p>\r\n      <router-link to=\"/categories\">{{ $t(\"common.addCategory\") }}</router-link>\r\n    </div>\r\n    <section v-else>\r\n      <div v-for=\"category of categories\" :key=\"category.id\">\r\n        <p>\r\n          <strong>{{ category.title }}:</strong>\r\n          {{ getCurrency(category.spend) }} {{ $t(\"planning.out\") }}\r\n          {{ getCurrency(category.limit) }}\r\n        </p>\r\n        <div class=\"progress\" v-tooltip=\"category.tooltipText\">\r\n          <div\r\n            class=\"determinate\"\r\n            :class=\"[category.progressColor]\"\r\n            :style=\"{ width: category.progress + '%' }\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport { getCurrencyFormat } from \"@/utils/currency\";\r\n\r\nexport default {\r\n  name: \"Planning\",\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      categories: [],\r\n      records: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"user\"]),\r\n  },\r\n  async mounted() {\r\n    const records = await this.$store.dispatch(\"getRecords\");\r\n    const categories = await this.$store.dispatch(\"getCategories\");\r\n\r\n    this.categories = categories.map((category) => {\r\n      const spend = records\r\n        .filter((record) => record.categoryId === category.id)\r\n        .filter((record) => record.type === \"outcome\")\r\n        .reduce((total, record) => {\r\n          return (total += +record.amount);\r\n        }, 0);\r\n\r\n      const percent = (100 * spend) / category.limit;\r\n      const progress = percent > 100 ? 100 : percent;\r\n      const progressColor =\r\n        percent < 60 ? \"green\" : percent < 100 ? \"yellow\" : \"red\";\r\n      const tooltipValue = category.limit - spend;\r\n      const tooltipText = `${\r\n        tooltipValue < 0\r\n          ? this.$t(\"planning.tooltipText.excess\")\r\n          : this.$t(\"planning.tooltipText.left\")\r\n      } ${getCurrencyFormat(Math.abs(tooltipValue))}`;\r\n\r\n      return { ...category, progress, spend, progressColor, tooltipText };\r\n    });\r\n\r\n    this.loading = false;\r\n  },\r\n  methods: {\r\n    getCurrency(bill) {\r\n      return getCurrencyFormat(bill);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./Planning.vue?vue&type=template&id=2df09070\"\nimport script from \"./Planning.vue?vue&type=script&lang=js\"\nexport * from \"./Planning.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\GitRepositories\\\\crm-system\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar $TypeError = TypeError;\n\nvar REDUCE_EMPTY = 'Reduce of empty array with no initial value';\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    aCallable(callbackfn);\n    if (length === 0 && argumentsLength < 2) throw new $TypeError(REDUCE_EMPTY);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw new $TypeError(REDUCE_EMPTY);\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}