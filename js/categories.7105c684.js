(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["categories"],{"58c2":function(e,t,i){"use strict";i.r(t);var l=i("7a23");const c={class:"page-title"},a={key:1,class:"row"},o={key:1,class:"center"};function r(e,t,i,r,s,n){const d=Object(l["resolveComponent"])("Loader"),m=Object(l["resolveComponent"])("AddCategory"),b=Object(l["resolveComponent"])("EditCategory");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",c,[Object(l["createElementVNode"])("h3",null,Object(l["toDisplayString"])(e.$t("categories.title")),1)]),Object(l["createElementVNode"])("section",null,[s.loading?(Object(l["openBlock"])(),Object(l["createBlock"])(d,{key:0})):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",a,[Object(l["createVNode"])(m,{onAdd:n.addNewCategory},null,8,["onAdd"]),s.categories.length?(Object(l["openBlock"])(),Object(l["createBlock"])(b,{categories:s.categories,onEdit:n.editCategory,key:s.categories.length+s.update},null,8,["categories","onEdit"])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",o,Object(l["toDisplayString"])(e.$t("common.noCategories")),1))]))])])}i("14d9");const s={class:"col s12 m6"},n={class:"page-subtitle"},d={class:"input-field"},m={for:"name"},b={key:0,class:"helper-text invalid"},j={class:"input-field"},O={for:"limit"},g={key:0,class:"helper-text invalid"},u={class:"btn waves-effect waves-light",type:"submit"},p=Object(l["createElementVNode"])("i",{class:"material-icons right"},"send",-1);function h(e,t,i,c,a,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",s,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",n,[Object(l["createElementVNode"])("h4",null,Object(l["toDisplayString"])(e.$t("categories.addCategory.title")),1)]),Object(l["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(l["withModifiers"])((...e)=>o.onSubmit&&o.onSubmit(...e),["prevent"]))},[Object(l["createElementVNode"])("div",d,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"name",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.title=e),class:Object(l["normalizeClass"])({invalid:c.v$.title.$error})},null,2),[[l["vModelText"],a.title]]),Object(l["createElementVNode"])("label",m,Object(l["toDisplayString"])(e.$t("categories.addCategory.name")),1),c.v$.title.$error?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",b,Object(l["toDisplayString"])(c.v$.title.$errors[0].$message),1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",j,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"limit",type:"number",step:"any","onUpdate:modelValue":t[1]||(t[1]=e=>a.limit=e),class:Object(l["normalizeClass"])({invalid:c.v$.limit.$error})},null,2),[[l["vModelText"],a.limit,void 0,{number:!0}]]),Object(l["createElementVNode"])("label",O,Object(l["toDisplayString"])(e.$t("categories.addCategory.limit")),1),c.v$.limit.$error?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",g,Object(l["toDisplayString"])(c.v$.limit.$errors[0].$message),1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("button",u,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.$t("categories.addCategory.btnText"))+" ",1),p])],32)])])}var v=i("c3b3"),y=i("b9fb"),$=i("b444"),E={data(){return{title:"",limit:50}},setup(){return{v$:Object(v["a"])()}},validations:{title:{required:y["b"].withMessage("Введите название",y["e"])},limit:{required:y["b"].withMessage("Введите минимальное значение",y["e"]),minValue:y["b"].withMessage(({$params:e})=>"Минимальное значение должно быть не менее "+e.min,Object(y["d"])(50))}},mounted(){window.M.updateTextFields()},methods:{async onSubmit(){if(this.v$.$validate(),!this.v$.$error){const t={title:this.title,limit:this.limit};try{const e=await this.$store.dispatch("addCategory",t);this.clearForm(),this.$message($["a"]["add-category"]),this.$emit("add",e)}catch(e){}}},clearForm(){this.title="",this.limit=50,this.v$.$reset()}}},V=i("6b0d"),N=i.n(V);const k=N()(E,[["render",h]]);var w=k;const C={class:"col s12 m6"},f={class:"page-subtitle"},B={class:"input-field"},S=["value"],D={class:"input-field"},x={for:"title"},M={key:0,class:"helper-text invalid"},T={class:"input-field"},F={for:"limit"},U={key:0,class:"helper-text invalid"},q={class:"btn waves-effect waves-light",type:"submit"},z=Object(l["createElementVNode"])("i",{class:"material-icons right"},"send",-1);function A(e,t,i,c,a,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",C,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",f,[Object(l["createElementVNode"])("h4",null,Object(l["toDisplayString"])(e.$t("categories.editCategory.title")),1)]),Object(l["createElementVNode"])("form",{onSubmit:t[3]||(t[3]=Object(l["withModifiers"])((...e)=>o.onSubmit&&o.onSubmit(...e),["prevent"]))},[Object(l["createElementVNode"])("div",B,[Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{ref:"select","onUpdate:modelValue":t[0]||(t[0]=e=>a.current=e)},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(i.categories,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e.id,value:e.id},Object(l["toDisplayString"])(e.title),9,S))),128))],512),[[l["vModelSelect"],a.current]]),Object(l["createElementVNode"])("label",null,Object(l["toDisplayString"])(e.$t("categories.editCategory.categoryLabel")),1)]),Object(l["createElementVNode"])("div",D,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"title",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>a.title=e),class:Object(l["normalizeClass"])({invalid:c.v$.title.$error})},null,2),[[l["vModelText"],a.title]]),Object(l["createElementVNode"])("label",x,Object(l["toDisplayString"])(e.$t("categories.editCategory.name")),1),c.v$.title.$error?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",M,Object(l["toDisplayString"])(c.v$.title.$errors[0].$message),1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",T,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"limit",type:"number",step:"any","onUpdate:modelValue":t[2]||(t[2]=e=>a.limit=e),class:Object(l["normalizeClass"])({invalid:c.v$.limit.$error})},null,2),[[l["vModelText"],a.limit,void 0,{number:!0}]]),Object(l["createElementVNode"])("label",F,Object(l["toDisplayString"])(e.$t("categories.editCategory.limit")),1),c.v$.limit.$error?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",U,Object(l["toDisplayString"])(c.v$.limit.$errors[0].$message),1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("button",q,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.$t("categories.editCategory.btnText"))+" ",1),z])],32)])])}var L={props:["categories"],data(){return{title:"",limit:50,current:null,select:null}},watch:{current(e){const{title:t,limit:i}=this.categories.find(t=>t.id===e);this.title=t,this.limit=i}},setup(){return{v$:Object(v["a"])()}},validations:{title:{required:y["b"].withMessage("Введите название",y["e"])},limit:{required:y["b"].withMessage("Введите минимальное значение",y["e"]),minValue:y["b"].withMessage(({$params:e})=>"Минимальное значение должно быть не менее "+e.min,Object(y["d"])(50))}},created(){const{id:e,title:t,limit:i}=this.categories[0];this.current=e,this.title=t,this.limit=i},mounted(){this.select=window.M.FormSelect.init(this.$refs.select),window.M.updateTextFields()},methods:{async onSubmit(){if(this.v$.$validate(),!this.v$.$error){const t={id:this.current,title:this.title,limit:this.limit};try{await this.$store.dispatch("editCategory",t),this.$message($["a"]["edit-category"]),this.$emit("edit",t)}catch(e){}}}},beforeUnmount(){this.select&&this.select.destroy&&this.select.destroy()}};const J=N()(L,[["render",A]]);var I=J,G={name:"Categories",components:{AddCategory:w,EditCategory:I},data(){return{categories:[],loading:!0,update:0}},async mounted(){this.categories=await this.$store.dispatch("getCategories"),this.loading=!1},methods:{addNewCategory(e){this.categories.push(e)},editCategory(e){const t=this.categories.findIndex(t=>t.id===e.id);this.categories[t].title=e.title,this.categories[t].limit=e.limit,this.update++}}};const H=N()(G,[["render",r]]);t["default"]=H}}]);
//# sourceMappingURL=categories.7105c684.js.map